import{_ as S,r as h,A as j,a,c as r,f as e,E as D,u as t,ae as c,I as x,K as w,ai as H,e as _,L as I,p as P,g as T,aA as z,n as E,aB as G,aC as K,aD as O,aE as J,aF as Q,aG as W,b as k,v as $,q as X,w as q,o as Y,aH as Z,F as ee,l as te,D as le,aI as se,t as g,a0 as ne}from"./index-u-RSwE93.js";import{P as oe}from"./PaginationButtons-VeAyxRz6.js";import{u as L}from"./AdminData-AviwCF_v.js";import"./axios-L6U4YIEh.js";const ie="/images/undraw_no_data_re_kwbl.svg",C=b=>(P("data-v-979cd451"),b=b(),T(),b),ae={class:"filter-files position-relative"},re={class:"btn-cont"},ue={class:"dropdown d-inline-block"},de=C(()=>e("a",{class:"btn dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," المزيد من الخيارات ",-1)),ce={class:"dropdown-menu"},pe=C(()=>e("label",{for:"file-type"},"تصنيف حسب نوع الملف",-1)),fe=z('<option value="تقرير" data-v-979cd451>تقرير</option><option value="وثيقة مشروع" data-v-979cd451>وثيقة مشروع</option><option value="أنظمة وتشريعات" data-v-979cd451>أنظمة وتشريعات</option><option value="أبحاث وإصدارات" data-v-979cd451>أبحاث وإصدارات</option><option value="خطط استراتيجية" data-v-979cd451>خطط استراتيجية</option><option value="خطط تشغيلية" data-v-979cd451>خطط تشغيلية</option><option value="ميزانيات" data-v-979cd451>ميزانيات</option><option value="تدريب" data-v-979cd451>تدريب</option>',8),ve=[fe],me={class:"d-flex justify-content-between mt-1"},_e=C(()=>e("button",{type:"submit",class:"btn btn-primary col-5"},"حفظ",-1)),be=C(()=>e("label",{for:"user-id"},"تصنيف حسب معرف المستخدم",-1)),ye={class:"d-flex justify-content-between mt-1"},he=C(()=>e("button",{type:"submit",class:"btn btn-primary col-5"},"حفظ",-1)),ke={class:"d-flex justify-content-between mt-1"},Fe=C(()=>e("button",{type:"submit",class:"btn btn-primary col-5"},"حفظ",-1)),ge=["disabled"],xe=["disabled"],$e={__name:"FilterHeader",setup(b){let l=L(),n=h(""),u=h(!1),d=h(!1),f=h(null),y=h(!1),p=h(null),s=h(!1),m=h(null),v=h(null);j(()=>{l.otherFilter=u.value,l.fileType=f.value,l.userId=p.value,l.startDate=m.value,l.endDate=v.value});let U=()=>{d.value=!0,u.value=!0,y.value=!1,s.value=!1,p.value=null,m.value=null,v.value=null,n.value=null,l.search=!1},B=()=>{y.value=!0,u.value=!0,d.value=!1,s.value=!1,m.value=null,v.value=null,f.value=null,n.value=null,l.search=!1},V=()=>{u.value=!0,s.value=!0,y.value=!1,d.value=!1,p.value=null,f.value=null,n.value=null,l.search=!1};function M(){l.FilterFiles("user",p.value),l.filter=""}function N(){l.FilterFiles("file_type",f.value),l.filter=""}function R(){l.FilterFiles(m.value,v.value,1,!0),l.filter=""}function A(){l.search=!0,l.filter="",u.value=!1,s.value=!1,y.value=!1,d.value=!1,l.searchFiles(n.value,1)}return j(()=>{n.value||(l.search=!1),l.searchValue=n.value}),(mt,o)=>(a(),r("article",ae,[e("div",re,[e("button",{class:D(["btn btn-light m-1",{"btn-dark":t(l).filter===""}]),onClick:o[0]||(o[0]=i=>(t(l).getFileList(1),c(n)?n.value=null:n=null))}," الكل ",2),e("button",{class:D(["btn btn-light m-1",{"btn-dark":t(l).filter==="approved"}]),onClick:o[1]||(o[1]=i=>(t(l).filter="approved",t(l).FilterFiles("status","approved",1),c(n)?n.value=null:n=null))}," مقبول ",2),e("button",{class:D(["btn btn-light m-1",{"btn-dark":t(l).filter==="pending"}]),onClick:o[2]||(o[2]=i=>(t(l).filter="pending",t(l).FilterFiles("status","pending",1),c(n)?n.value=null:n=null))}," قيد الإنتظار ",2),e("button",{class:D(["btn btn-light m-1",{"btn-dark":t(l).filter==="rejected"}]),onClick:o[3]||(o[3]=i=>(t(l).filter="rejected",c(n)?n.value=null:n=null,t(l).FilterFiles("status","rejected",1)))}," مرفوض ",2),e("div",ue,[de,e("ul",ce,[e("li",null,[e("a",{onClick:o[4]||(o[4]=x((...i)=>t(U)&&t(U)(...i),["prevent"])),class:"dropdown-item",href:"#"},"نوع الملف")]),e("li",null,[e("a",{onClick:o[5]||(o[5]=x((...i)=>t(B)&&t(B)(...i),["prevent"])),class:"dropdown-item",href:"#"},"معرف المستخدم")]),e("li",null,[e("a",{onClick:o[6]||(o[6]=x((...i)=>t(V)&&t(V)(...i),["prevent"])),class:"dropdown-item",href:"#"},"تاريخ الرفع")])]),e("span",null,[t(d)?(a(),r("form",{key:0,class:"file-type-form d-inline-block d-inline-flex flex-column justify-content-center",onSubmit:o[9]||(o[9]=x(i=>N(),["prevent"]))},[pe,w(e("select",{placeholder:" تصنيف حسب نوع الملف","onUpdate:modelValue":o[7]||(o[7]=i=>c(f)?f.value=i:f=i),id:"file-type","data-v-294d27b4":"",class:"form-select form-select-lg d-inline-block","aria-label":"Default select example",required:""},ve,512),[[H,t(f)]]),e("div",me,[_e,e("button",{type:"reset",class:"btn btn-danger col-5",onClick:o[8]||(o[8]=i=>(c(f)?f.value=null:f=null,c(d)?d.value=!1:d=!1,c(u)?u.value=!1:u=!1,t(l).getFileList()))}," الغاء ")])],32)):_("",!0)]),e("span",null,[t(y)?(a(),r("form",{key:0,class:"user-id-form d-inline-block d-inline-flex flex-column justify-content-center",onSubmit:o[12]||(o[12]=x(i=>M(),["prevent"]))},[be,w(e("input",{required:"",class:"form-control",type:"text",id:"user-id","onUpdate:modelValue":o[10]||(o[10]=i=>c(p)?p.value=i:p=i),placeholder:"أدخل معرف المستخدم"},null,512),[[I,t(p)]]),e("div",ye,[he,e("button",{type:"reset",class:"btn btn-danger col-5",onClick:o[11]||(o[11]=i=>(c(p)?p.value=null:p=null,c(y)?y.value=!1:y=!1,c(u)?u.value=!1:u=!1,t(l).getFileList()))}," الغاء ")])],32)):_("",!0)]),e("span",null,[t(s)?(a(),r("form",{key:0,class:"user-id-form d-inline-block d-inline-flex flex-column justify-content-center",onSubmit:x(R,["prevent"])},[w(e("input",{required:"",class:"form-control",type:"date",id:"date-filter-start","onUpdate:modelValue":o[13]||(o[13]=i=>c(m)?m.value=i:m=i)},null,512),[[I,t(m)]]),w(e("input",{required:"",class:"form-control",type:"date",id:"date-filter-end","onUpdate:modelValue":o[14]||(o[14]=i=>c(v)?v.value=i:v=i)},null,512),[[I,t(v)]]),e("div",ke,[Fe,e("button",{type:"reset",class:"btn btn-danger col-5",onClick:o[15]||(o[15]=i=>(c(s)?s.value=!1:s=!1,c(m)?m.value=null:m=null,c(v)?v.value=null:v=null,c(u)?u.value=!1:u=!1,t(l).getFileList()))}," الغاء ")])],32)):_("",!0)])]),w(e("input",{required:"","onUpdate:modelValue":o[16]||(o[16]=i=>c(n)?n.value=i:n=i),placeholder:" أدخل كلمة البحث ",type:"text",class:"btn m-1 search_bar"},null,512),[[I,t(n)]]),e("button",{class:"btn btn-danger ms-1 d-sm-inline-block d-none",type:"reset",onClick:o[17]||(o[17]=i=>(c(n)?n.value="":n="",t(l).getFileList())),disabled:!t(n)}," إلغاء ",8,ge),e("button",{class:"btn btn-primary",type:"submit",onClick:o[18]||(o[18]=i=>A()),disabled:!t(n)}," بحث ",8,xe)])]))}},we=S($e,[["__scopeId","data-v-979cd451"]]),Ce={key:0,class:"mb-1 p-3"},De={key:1,class:"mb-1 p-3"},Ie={key:2,class:"mb-1 p-3"},je={key:3,class:"mb-1 p-3"},Se={key:4,class:"mb-1 p-3"},Le={key:5,class:"mb-1 p-3"},Ue={__name:"FileIcon",props:["type"],setup(b){let l=b;return E(W,Q,J,O,K,G),(n,u)=>t(l).type==="doc"?(a(),r("span",Ce,[k(t($),{name:"bi-filetype-doc",scale:"4",style:{fill:"rgb(80, 190, 232)"}})])):t(l).type==="docx"?(a(),r("span",De,[k(t($),{name:"bi-filetype-docx",scale:"4",style:{fill:"rgb(80, 190, 232)"}})])):t(l).type==="pdf"?(a(),r("span",Ie,[k(t($),{name:"bi-filetype-pdf",scale:"4",style:{fill:"rgb(241, 86, 66)"}})])):t(l).type==="csv"?(a(),r("span",je,[k(t($),{name:"bi-filetype-csv",scale:"4",style:{fill:"rgb(247, 184, 78)"}})])):t(l).type==="txt"?(a(),r("span",Se,[k(t($),{name:"bi-filetype-txt",scale:"4",style:{fill:"rgb(87, 109, 126)"}})])):(a(),r("span",Le,[k(t($),{name:"bi-file-text",scale:"4",style:{fill:"rgb(87, 109, 126)"}})]))}},Be={class:"pop-over text-center d-flex flex-column align-items-center justify-content-center"},Ve={__name:"editFile",props:["id","file"],emits:["closePopUp"],setup(b,{emit:l}){let n=b,u=l,d=L();const f=p=>{d.updateFileStatus(p,n.id),u("closePopUp")},y=(p,s)=>{d.showEditPopUpId=p,d.editFileData=s};return(p,s)=>{const m=X("RouterLink");return a(),r("div",Be,[e("button",{onClick:s[0]||(s[0]=x(v=>t(u)("closePopUp"),["prevent"])),class:"close-button"},"x"),t(d).filter!=="approved"?(a(),r("span",{key:0,class:"approve-btn",onClick:s[1]||(s[1]=v=>f("approved"))},"قبول")):_("",!0),t(d).filter!=="pending"?(a(),r("span",{key:1,onClick:s[2]||(s[2]=v=>f("pending"))},"انتظار")):_("",!0),t(d).filter!=="rejected"?(a(),r("span",{key:2,onClick:s[3]||(s[3]=v=>f("rejected"))},"رفض")):_("",!0),k(m,{to:"/update-file"},{default:q(()=>[e("span",{onClick:s[4]||(s[4]=v=>y(t(n).id,t(n).file))},"تعديل")]),_:1}),e("span",{onClick:s[5]||(s[5]=v=>t(d).deleteFiles(t(n).id))},"حذف")])}}},Pe=S(Ve,[["__scopeId","data-v-2e44138a"]]),F=b=>(P("data-v-f5654bdc"),b=b(),T(),b),Te={class:"file-container-parent"},Ee={class:"show-file-details mt-5"},qe={class:"form-check form-switch"},Me=F(()=>e("label",{class:"form-check-label",for:"flexSwitchCheckChecked"},"عرض المزيد من تفاصيل الملف",-1)),Ne={key:0,class:"file-list-container container d-flex flex-wrap justify-content-start"},Re={class:"file-container d-flex flex-column justify-content-center align-items-center position-relative m-2 p-2 col-12 col-md-5 col-lg-2"},Ae=["onClick"],He={class:"file-status"},ze={key:0,style:{color:"orange"}},Ge={key:1,style:{color:"green"}},Ke={key:2,style:{color:"red"}},Oe=["href"],Je={class:"file-name-container w-100 overflow-hidden d-flex justify-content-evenly"},Qe={class:"file-name"},We={class:"date-user-cont"},Xe={class:"user-name text-truncate"},Ye={key:0},Ze={key:1,dir:"rtl",class:"info-container"},et=F(()=>e("hr",null,null,-1)),tt=F(()=>e("hr",null,null,-1)),lt=F(()=>e("hr",null,null,-1)),st=F(()=>e("hr",null,null,-1)),nt=F(()=>e("hr",null,null,-1)),ot=F(()=>e("hr",null,null,-1)),it=["onClick"],at={key:1,class:"no-file"},rt=F(()=>e("img",{src:ie,alt:"no file"},null,-1)),ut=F(()=>e("h1",null,"لا يوجد ملفات",-1)),dt=[rt,ut],ct={key:2,class:"d-flex justify-content-center mt-5"},pt=F(()=>e("div",{class:"loader"},null,-1)),ft=[pt],vt={__name:"FilesList",setup(b){let l=L(),n=h(null);j(()=>{n.value=l.fileList});let u=h(null),d=h(!1);function f(y){u.value=parseInt(y)||null}return Y(()=>{l.getFileList(1)}),E(se),(y,p)=>(a(),r("section",Te,[k(we,{class:"mb-5"}),e("span",Ee,[e("span",qe,[w(e("input",{"onUpdate:modelValue":p[0]||(p[0]=s=>c(d)?d.value=s:d=s),class:"form-check-input",type:"checkbox",role:"switch",id:"flexSwitchCheckChecked"},null,512),[[Z,t(d)]]),Me])]),t(n)?(a(),r("section",Ne,[(a(!0),r(ee,null,te(t(n),s=>(a(),r("div",Re,[e("span",{class:"toggle-span",onClick:m=>f(s.id)},[k(t($),{name:"ri-edit-fill"})],8,Ae),e("span",He,[s.status==="pending"?(a(),r("p",ze,"انتظار")):_("",!0),s.status==="approved"?(a(),r("p",Ge,"مقبول")):_("",!0),s.status==="rejected"?(a(),r("p",Ke,"مرفوض")):_("",!0)]),e("a",{href:s.file,target:"_blank",rel:"noopener noreferrer"},[k(Ue,{type:s.file.split(".")[s.file.split(".").length-1]},null,8,["type"])],8,Oe),e("div",Je,[e("p",Qe,g(s.file_name),1)]),e("div",We,[e("div",Xe,[e("p",null,g(s.user_name),1)])]),t(u)===parseInt(s.id)?(a(),r("div",Ye,[k(Pe,{style:ne({top:t(d)?"150px":""}),onClosePopUp:p[1]||(p[1]=m=>c(u)?u.value=null:u=null),id:s.id,file:s},null,8,["style","id","file"])])):_("",!0),t(d)?(a(),r("div",Ze,[e("p",null,"اسم الملف: "+g(s.file_name),1),et,e("p",null,"المؤلف : "+g(s.author),1),tt,e("p",null,"نوع الملف : "+g(s.file_type),1),lt,e("p",null,"المنطقة: "+g(s.city),1),st,e("p",null,"تاريخ الإصدار : "+g(s.release_date),1),nt,e("p",null,"اسم الجهة المصدرة : "+g(s.source_entity_name),1),ot,e("p",null,"نبذة عن الملف: "+g(s.overview),1)])):_("",!0)]))),256)),t(l).loading?_("",!0):(a(),le(oe,{key:0,number:t(l).filesNumber},{button:q(({number:s})=>[e("span",{class:"pagination-slot",onClick:m=>t(l).PaginateFile(s)},null,8,it)]),_:1},8,["number"]))])):_("",!0),t(n).length<=0&&!t(l).loading?(a(),r("section",at,dt)):_("",!0),t(l).loading?(a(),r("section",ct,ft)):_("",!0)]))}},kt=S(vt,[["__scopeId","data-v-f5654bdc"]]);export{kt as default};
