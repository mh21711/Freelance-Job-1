import{x as J,z as P,r as o,V as Q,S as W,_ as X,a2 as Y,a3 as Z,n as $,ag as ee,y as te,ah as le,a as i,c as v,f as t,u as l,I as T,E as se,t as V,e as q,D as I,a0 as oe,v as L,K as g,L as C,ae as k,ai as ae,F as j,l as z,p as ne,g as ie,b as re}from"./index-u-RSwE93.js";import{u as de}from"./index-WUFzWg7p.js";import{a as ue}from"./axios-L6U4YIEh.js";const ce=J("FileUpload",()=>{let h=P(),a=o(!1),b=o(!1),w=o(!1);function B(r,u,c,p,n,f,m,_){a.value=!0;let y=Q.get("jwt");ue.post("https://impactstudio.pythonanywhere.com/api/user/upload/",{file:r,file_name:u,overview:_,release_date:c,region:n,file_type:m,source_entity_name:p,author:f,city:n},{withCredentials:!0,headers:{Authorization:`Bearer ${y}`,"Content-Type":"multipart/form-data"}}).then(D=>{w.value=!0,W.fire({title:"تم رفع الملف بنجاح",text:"هل تريد العودة إلى صفحة الدردشة",icon:"success",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#4CA746",confirmButtonText:"نعم, العودة إلى الدردشة",cancelButtonText:"لا, البقاء هنا",reverseButtons:!0}).then(x=>{x.isConfirmed&&h.push("/chat")})}).catch(D=>{b.value=!0}).finally(()=>{a.value=!1,setTimeout(()=>{b.value=!1},2e3)})}return{submitData:B,loading:a,errorUpload:b,success:w}}),d=h=>(ne("data-v-374a1b4a"),h=h(),ie(),h),pe={class:"container d-flex justify-content-center align-items-center"},fe={class:"form-upload-cont"},me=["disabled"],_e=d(()=>t("h1",{class:"text-center text-dark"},"اختيار ملف",-1)),ve={class:"file"},he=d(()=>t("label",{class:"form-label",for:"customFile"},null,-1)),be={key:0,style:{color:"green","font-size":"20px"}},ye={class:"file-name my-2"},xe=d(()=>t("label",null,"اسم الملف",-1)),ge={class:"date my-2"},ke=d(()=>t("label",{for:"date"},"تاريخ إصدار الملف",-1)),Ce=["max"],we={class:"publisher my-2"},Ue=d(()=>t("label",null," اسم الجهة الناشرة",-1)),Be={class:"author my-2"},De=d(()=>t("label",null,"المؤلف",-1)),Fe={class:"file-type my-2"},Ve=d(()=>t("label",null,"نوع الملف",-1)),Se=["value"],Te=d(()=>t("label",{for:"country_dataList",class:"form-label"},"المنطقة/المدينة",-1)),qe={id:"datalistOptions"},Ie=["value"],Le={class:"my-2"},je=d(()=>t("label",{for:"note",class:"form-label"},"نبذة عن الملف",-1)),ze={class:"btn-cont d-flex justify-content-center mt-4"},Ne=["disabled"],Oe=["disabled"],Ae={key:0,class:"spinner-border",role:"status"},Ee={key:1},Me={key:0,class:"alert alert-danger position-absolute",role:"alert"},Re={__name:"UploadFile",setup(h){const a=ce(),b=["المملكة العربية السعودية","البحرين","الجزائر","الأردن","الكويت","لبنان","ليبيا","مصر","موريتانيا","المغرب","عمان","قطر","تونس","الإمارات العربية المتحدة","اليمن","أفغانستان","أذربيجان","أرمينيا","باكستان","بنغلاديش","تركمانستان","تركيا","جورجيا","جزر المالديف","جزر سليمان","جزر القمر","سوريا","سيراليون","صربيا","طاجيكستان","عُمان","فلسطين","فيتنام","قيرغيزستان","كازاخستان","كوريا الجنوبية","كوريا الشمالية","كيرغيزستان","ليبيريا","مالي","منغوليا","نيبال","هندوراس","هولندا","ياباني","زامبيا","زيمبابوي","الأرجنتين","البحرين","البرازيل","البرتغال","البوسنة والهرسك","الدنمارك","السلفادور","السويد","الصومال","العراق","الفلبين","المكسيك","النرويج","الهند","اليابان","اليونان","بوليفيا","بولندا","بيرو","تشيلي","جمهورية الدومينيكان","جنوب السودان","جورجيا","رواندا","روسيا","رومانيا","ساحل العاج","سانت كيتس ونيفيس","سانت فنسنت والغرينادين","سانت لوسيا","ساو تومي وبرينسيبي","سريلانكا","سوازيلاند","سويسرا","شيلى","صربيا","عمان","فرنسا","فنزويلا","فنلندا","فيجي","قبرص","قرغيزستان","كرواتيا","كمبوديا","لاتفيا","لبنان","ليتوانيا","ليسوتو","ليبيريا","مالطا","ماليزيا","مدغشقر","موريتانيا","موريشيوس","موزمبيق","مولدوفا","ناميبيا","نيجيريا","هايتي","هندوراس","هنغاريا","هولندا","ويلز"],w=["تقرير","وثيقة مشروع","أنظمة وتشريعات","أبحاث وإصدارات","خطط استراتيجية","خطط تشغيلية","ميزانيات","تدريب"];var B=new Date().toISOString().split("T")[0];let r=o(""),u=o(""),c=o(""),p=o(""),n=o(null),f=o(""),m=o(null),_=o(""),y=o(!1);const D=o([]);let{files:x,open:N,reset:O,onChange:A}=de({accept:".pdf,.doc,.docx",multiple:!1});Y(n,()=>{const U=n.value.toLowerCase();D.value=b.filter(s=>s.toLowerCase().includes(U))});function E(U,s,e,M,R,K,G,H){F(),a.submitData(U,s,e,M,R,K,G,H),S()}let F=()=>{!x.value&&!a.loading&&!a.success?(console.log(a.loading),y.value=!0):y.value=!1};A(()=>{x.value&&x.value.length>0&&(r.value=x.value[0]),F()});function S(){u.value="",c.value="",r.value="",n.value="",p.value="",f.value="",m.value="",_.value="",O()}return Z(()=>{F()}),$(le,te,ee),(U,s)=>(i(),v("div",pe,[t("div",fe,[t("form",{disabled:l(y),onSubmit:s[9]||(s[9]=T(e=>E(l(r),l(u),l(c),l(p),l(n),l(f),l(m),l(_)),["prevent"]))},[_e,t("div",ve,[he,t("button",{class:se(["form-control",{"no-file":l(y)}]),id:"customFile",onClick:s[0]||(s[0]=T(e=>l(N)(),["prevent"]))},[l(r)?(i(),v("p",be,V(l(r).name),1)):q("",!0),l(r)?(i(),I(l(L),{key:1,scale:"2",name:"bi-file-earmark-text",class:"my-3",style:oe({color:l(r)?"darkgreen":""})},null,8,["style"])):(i(),I(l(L),{key:2,scale:"2",name:"bi-upload",class:"my-3"}))],2)]),t("div",ye,[xe,g(t("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>k(u)?u.value=e:u=e),type:"text",id:"file-name",class:"form-control p-3",placeholder:"اسم الملف",required:""},null,512),[[C,l(u)]])]),t("div",ge,[ke,g(t("input",{class:"form-control p-3",type:"date",id:"date",required:"","onUpdate:modelValue":s[2]||(s[2]=e=>k(c)?c.value=e:c=e),max:l(B)},null,8,Ce),[[C,l(c)]])]),t("div",we,[Ue,g(t("input",{"onUpdate:modelValue":s[3]||(s[3]=e=>k(p)?p.value=e:p=e),type:"text",class:"form-control p-3",placeholder:"اسم الجهة الناشرة",required:""},null,512),[[C,l(p)]])]),t("div",Be,[De,g(t("input",{"onUpdate:modelValue":s[4]||(s[4]=e=>k(f)?f.value=e:f=e),type:"text",class:"form-control p-3",placeholder:"المؤلف"},null,512),[[C,l(f)]])]),t("div",Fe,[Ve,g(t("select",{class:"form-select form-select-lg","aria-label":"Default select example","onUpdate:modelValue":s[5]||(s[5]=e=>k(m)?m.value=e:m=e),required:""},[(i(),v(j,null,z(w,e=>t("option",{value:e,key:e},V(e),9,Se)),64))],512),[[ae,l(m)]])]),Te,g(t("input",{class:"form-control",list:"datalistOptions",id:"country_dataList",placeholder:"ابحث عن المدينة","onUpdate:modelValue":s[6]||(s[6]=e=>k(n)?n.value=e:n=e)},null,512),[[C,l(n)]]),t("datalist",qe,[(i(),v(j,null,z(b,e=>t("option",{value:e,key:e},V(e),9,Ie)),64))]),t("div",Le,[je,g(t("textarea",{class:"form-control",id:"note",rows:"3",required:"","onUpdate:modelValue":s[7]||(s[7]=e=>k(_)?_.value=e:_=e)},null,512),[[C,l(_)]])]),t("div",ze,[t("button",{class:"btn btn-danger mx-5",type:"button",disabled:!l(x),onClick:s[8]||(s[8]=e=>S())}," حذف ",8,Ne),t("button",{class:"btn btn-primary",disabled:l(y)},[l(a).loading?(i(),v("span",Ae)):(i(),v("span",Ee,"ارسال"))],8,Oe),l(a).errorUpload?(i(),v("div",Me," حدث خطأ أثناء تحميل الملف. ")):q("",!0)])],40,me)])]))}},Ke=X(Re,[["__scopeId","data-v-374a1b4a"]]),Ge={class:"parent container d-flex justify-content-center align-items-center"},We={__name:"DashboardView",setup(h){return(a,b)=>(i(),v("section",Ge,[re(Ke)]))}};export{We as default};
