import{x as E,r as p,_ as k,n as B,y as ve,u as t,a as r,c as h,f as o,b as f,v as $,t as M,e as y,V as q,S as T,z as te,A as O,M as Ue,C as ye,D as S,E as N,G as He,H as qe,w as L,I as A,k as se,J as Ee,K as we,L as xe,N as Ae,O as Le,P as Ve,Q as Re,p as j,g as F,U as Pe,q as be,W as ze,X as Ke,Y as Ye,Z as Oe,h as W,$ as We,a0 as Ge,a1 as Xe,a2 as oe,a3 as Qe,o as Je,a4 as Ze,a5 as et,F as ue,d as Y,l as _e,T as me,a6 as $e,a7 as tt,a8 as st,a9 as at,aa as ot}from"./index-u-RSwE93.js";import{a as H}from"./axios-L6U4YIEh.js";import{u as ke}from"./SubscribePlan-q3SUWY-m.js";import{u as nt,a as G,b as it,o as lt}from"./index-WUFzWg7p.js";import{G as ct}from"./index-VzO4qmR5.js";import{C as rt}from"./index-sABCs6o2.js";const dt={name:"io-close",minX:0,minY:0,width:512,height:512,raw:'<path d="M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"/>'},ie=E("fileData",()=>{let e=p(!1),a=p("");return{showFile:e,fileName:a}}),ut={key:0,class:"file-detail d-flex align-items-center"},_t={class:"mx-1"},mt={__name:"FileName",setup(e){let a=ie();return B(ve),(n,s)=>t(a).showFile?(r(),h("div",ut,[o("button",{onClick:s[0]||(s[0]=c=>t(a).showFile=!1)},"X"),o("span",_t,[f(t($),{class:"file-icon",name:"bi-file-earmark-text",scale:"2"})]),o("p",null,M(t(a).fileName),1)])):y("",!0)}},ht=k(mt,[["__scopeId","data-v-5b90f25d"]]),X=E("userData",()=>{let e=p(""),a=p(""),n=p(""),s=p("");function c(){let l=q.get("jwt");H.get("https://impactstudio.pythonanywhere.com/api/user/data",{withCredentials:!0,headers:{Authorization:`Bearer ${l}`}}).then(i=>{e.value=i.data.name,a.value=i.data.email,n.value=i.data.id,s.value=i.data.points}).catch(i=>{e.value="unknown",a.value="unknown",setTimeout(()=>{c()},5e3)})}return{UserName:e,email:a,pointsNum:s,getUserData:c}}),le=E("fetchHistory",()=>{let e=p([]);return p(""),{getHistory:()=>{let n=q.get("jwt");H.get("https://impactstudio.pythonanywhere.com/api/user/get_chat_history/",{withCredentials:!0,headers:{Authorization:`Bearer ${n}`}}).then(s=>{e.value=s.data.user_chat_history.map(c=>{if(c.sent_file&&c.sent_file.toLowerCase().endsWith(".mp3"))return{...c,IsVoice:!0,IsFile:!1};if(c.sent_file){let l=c.sent_file.split("/"),i=l[l.length-1];return{...c,IsVoice:!1,IsFile:!0,fileName:i}}else return{...c,IsVoice:!1,IsFile:!1}})}).catch(s=>{console.log("error occured during fetching history.")})},history:e}}),ce=E("toggleChat",()=>{let e=p(!0),a=p(!1),n=p(0);return{newChat:e,history:a,count:n,showChat:()=>{e.value=!0,a.value=!1,n.value++},showHistory:()=>{a.value=!0,e.value=!1,n.value++}}}),R=E("fetchData",()=>{const e=le(),a=X(),n=ce();a.getUserData();let s=p(""),c=p(""),l=p(!1),i=p(""),u=p([]),g=p([]),w=p(!1),v=p(!1),C=_=>{n.history===!0?e.history.push({message_content:_,bot_answer:""}):u.value.push({question:s.value,text:""})},x=_=>{if(n.history===!0)if(e.history.length>0)if(_.data.completed_content){const m=e.history.length-1;e.history[m].bot_answer=_.data.completed_content,e.history[m].user_audio=null,e.history[m].id=_.data.message_id}else{const m=e.history.length-1;e.history[m].bot_file=_.data.image_url,e.history[m].user_audio=null,e.history[m].id=_.data.message_id}else _.data.completed_content?e.history.push({message_content:s.value,bot_answer:_.data.completed_content,user_audio:null,id:_.data.message_id}):e.history.push({message_content:s.value,bot_file:_.data.image_url,user_audio:null,id:_.data.message_id});else if(u.value.length>0){const m=u.value.length-1;_.data.completed_content?u.value[m].text=_.data.completed_content:u.value[m].image=_.data.image_url,u.value[m].id=_.data.message_id}else _.data.completed_content?u.value.push({question:s.value,text:_.data.completed_content,id:_.data.message_id}):u.value.push({question:s.value,image:_.data.image_url,id:_.data.message_id})},b=_=>{if(n.history===!0)if(e.history.length>0){const m=e.history.length-1;e.history[m].bot_answer=_.data.response,e.history[m].id=_.data.message_id}else e.history.push({message_content:s.value,bot_answer:_.data.response,user_audio:null,id:_.data.message_id});else if(u.value.length>0){const m=u.value.length-1;u.value[m].text=_.data.response,u.value[m].id=_.data.message_id}else u.value.push({question:s.value,text:_.data.response,id:_.data.message_id})},U=()=>{n.history===!0?e.history.pop():u.value.pop()};function d(_){let m=e.history.findIndex(I=>I.id===_);m!==-1&&e.history.splice(m,1)}function z(_){let m=u.value.findIndex(I=>I.id===_);m!==-1&&u.value.splice(m,1)}function Ie(){if(v.value=!0,s.value){w.value=!0,C(s.value);let _=q.get("jwt");l.value?(Se(_),s.value=""):(De(_),s.value="")}else i.value="الرجاء إدخال النص"}function Se(_){H.post("https://impactstudio.pythonanywhere.com/api/service/dall_e/",{prompt:s.value},{withCredentials:!0,headers:{Authorization:`Bearer ${_}`}}).then(m=>{x(m)}).catch(m=>{m.message.includes("blocked")||m.message.includes("not allowed")?i.value="تم حظر هذا الطلب بواسطة مرشحات المحتوى الخاصة بنا":i.value=m.response?m.response.data.error:"خطأ غير متوقع",U()}).finally(()=>{w.value=!1,v.value=!1,s.value="",c.value=""})}function De(_){H.post("https://impactstudio.pythonanywhere.com/api/service/chat_completion/",{message:s.value,type:"text"},{withCredentials:!0,headers:{Authorization:`Bearer ${_}`}}).then(m=>{x(m),i.value=""}).catch(m=>{U(),i.value=m.response?m.response.data.error:"خطأ غير متوقع"}).finally(()=>{w.value=!1,v.value=!1,s.value="",c.value=""})}function Be(_){if(v.value=!0,_){w.value=!0;let m=q.get("jwt");n.history===!0?e.history.push({message_content:""}):u.value.push({question:""}),H.post("https://impactstudio.pythonanywhere.com/api/service/chat_completion/",{file:_,type:"voice"},{withCredentials:!0,headers:{Authorization:`Bearer ${m}`,"Content-Type":"multipart/form-data"}}).then(I=>{n.history===!0?(e.history.pop(),e.history.push({bot_answer:I.data.completed_content,message_content:I.data.user_message,bot_file:I.data.bot_file,user_file:I.data.user_file,id:I.data.message_id}),i.value=""):(u.value.pop(),u.value.push({question:I.data.user_message,text:I.data.completed_content,BotVoice:I.data.bot_file,user_file:I.data.user_file,id:I.data.message_id}),i.value="")}).catch(I=>{n.history===!0?e.history.pop():u.value.pop(),i.value="خطأ غير متوقع"}).finally(()=>{w.value=!1,v.value=!1,Me()})}else i.value=" لا يوجد تسجيل صوتي متاح",v.value=!1,_=""}function Me(){s.value="",c.value=""}function Te(){if(v.value=!0,s.value){w.value=!0,n.history===!0?e.history.push({message_content:s.value,bot_answer:"",user_audio:null,IsFile:!0,fileName:c.value.name}):u.value.push({question:s.value,IsFile:!0,fileName:c.value.name,text:"",fileName:c.value.name});let _=new FormData;_.append("file",c.value);let m={"Content-Type":"multipart/form-data"},I=q.get("jwt");I&&(m.Authorization=`Bearer ${I}`);let ae=encodeURIComponent(c.value.name);m["Content-Disposition"]=`attachment; filename=${ae}`;let Fe="https://impactstudio.pythonanywhere.com/api/service/HandleFile/"+s.value+"/";s.value="",c.value="",H.post(Fe,_,{withCredentials:!0,headers:m}).then(K=>{b(K),i.value=""}).catch(K=>{/html|head/gi.test(K.response.data)&&T.fire({icon:"error",title:"خطأ.",text:"يرجى اختيار ملف صالح."}),u.value.pop(),i.value=K.response?K.response.data.detail:"خطأ غير متوقع"}).finally(()=>{w.value=!1,s.value="",c.value="",v.value=!1})}else i.value="الرجاء إدخال النص"}function Ne(){let _=q.get("jwt");H.delete("https://impactstudio.pythonanywhere.com/api/user/delete_chat_history/",{withCredentials:!0,headers:{Authorization:`Bearer ${_}`}}).then(()=>{u.value=[],e.history=[]}).catch(m=>{T.fire({icon:"error",title:"خطأ!",text:"حدث خطأ أثناء معالجة الطلب"})})}function je(_){if(_){let m=parseInt(_),I=q.get("jwt");H.delete(`https://impactstudio.pythonanywhere.com/api/user/delete_message/${m}/`,{withCredentials:!0,headers:{Authorization:`Bearer ${I}`}}).then(ae=>{n.history?d(m):z(m)}).catch(ae=>{})}}return{sendRequest:Ie,sendRequestWithFile:Te,deleteAllChat:Ne,deleteChat:je,sendRequestVoice:Be,userCurrentData:u,question:s,file:c,loading:w,chatError:i,disableSend:v,history:g,file:c,isImage:l}}),re=E("toggleModals",()=>{let e=p(!1);function a(){e.value=!e.value}return{toggleShowExchangeModal:a,showExchangeModel:e}}),V=ke(),pt=re(),Q=E("userLimits",()=>{const e=te();let a=p(null),n=p(null),s=p(null);V.getSubscribe();function c(){T.fire({icon:"info",title:"انتهى اشتراكك",text:" يمكنك الحصول على النقاط من خلال رفع الملفات. سيتم منحك 20 نقطة عن كل ملف يتم قبوله من قبل المسؤول واستبدال هذه النقاط بمزيد من الخدمات أو الاشتراك في الخطة المدفوعة",confirmButtonText:"اشترك في خطة",cancelButtonText:"رفع ملف",denyButtonText:" استبدال النقاط",showCancelButton:!0,reverseButtons:!0,showDenyButton:!0}).then(u=>{u.isConfirmed?e.push("/prices"):u.isDenied?pt.showExchangeModel=!0:u.dismiss===T.DismissReason.cancel&&e.push("/dashboard")})}function l(){let u=q.get("jwt");H.get("https://impactstudio.pythonanywhere.com/api/user/getlimits/",{withCredentials:!0,headers:{Authorization:`Bearer ${u}`}}).then(g=>{g.data.message===0&&g.data.audio_limit===0&&g.data.image_media_limit===0&&(V.previousSub&&V.subscribePlan!=="basic"?i():V.subscribePlan==="basic"&&!V.active?T.fire({icon:"info",title:"عذرًا...",text:"يرجى الاشتراك في خطة قبل المتابعة",confirmButtonText:"موافق"}).then(()=>{e.push("/prices")}):V.subscribePlan==="basic"&&c()),a.value=g.data.message,n.value=g.data.audio_limit,s.value=g.data.image_media_limit}).catch(g=>{setTimeout(()=>{l()},2e3)})}function i(){T.fire({icon:"warning",title:"عذراً",text:"لقد انتهى اشتراكك",confirmButtonText:"تجديد الاشتراك",reverseButtons:!0}).then(g=>{e.push("/prices").then(()=>{location.reload()})});let u=q.get("jwt");H.delete("https://impactstudio.pythonanywhere.com/api/user/delete_subscription/",{withCredentials:!0,headers:{Authorization:`Bearer ${u}`}}).then(g=>{}).catch(g=>{})}return{textNum:a,voiceNum:n,imageNum:s,getUserLimits:l,deleteSubscription:i}}),ft={class:"d-inline position-relative"},gt={__name:"FileUpload",setup(e){let a=ie(),{files:n,open:s,reset:c,onChange:l}=nt({accept:".docx,.doc,.pptx,.pdf",multiple:!1});const i=R(),u=Q(),g=G();function w(){c(),i.file=""}O(()=>{a.showFile||w()}),O(()=>{i.file===""&&c()});function v(C){var x=/(\.pdf|\.docx|\.doc|\.pptx)$/i;x.exec(C)||(T.fire({icon:"error",title:"حدث خطأ.",text:"الرجاء اختيار نوع ملف صالح."}),w())}return l(()=>{n.value&&n.value.length>0&&(a.showFile=!0,a.fileName=n.value[0].name,v(n.value[0].name),i.file=n.value[0])}),B(ye,Ue),(C,x)=>(r(),h("div",ft,[o("label",{for:"btn-upload",onClick:x[1]||(x[1]=b=>t(i).isImage=!1)},[o("input",{type:"button",id:"btn-upload",onClick:x[0]||(x[0]=b=>t(s)())}),t(u).textNum>0?(r(),S(t($),{key:0,name:"ri-file-upload-line",class:N(["upload-icon",[{"active-file":t(n)},{light:!t(g)}]]),scale:"1.75"},null,8,["class"])):y("",!0)]),!t(n)&&t(u).imageNum>0?(r(),S(t($),{key:0,name:"md-draw-outlined",scale:"1.75",class:N(["create-image",[{"active-image":t(i).isImage},{light:!t(g)}]]),onClick:x[2]||(x[2]=b=>t(i).isImage=!t(i).isImage)},null,8,["class"])):y("",!0)]))}},vt=k(gt,[["__scopeId","data-v-201e3d43"]]);let ee;const yt=new Uint8Array(16);function wt(){if(!ee&&(ee=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ee))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ee(yt)}const D=[];for(let e=0;e<256;++e)D.push((e+256).toString(16).slice(1));function xt(e,a=0){return D[e[a+0]]+D[e[a+1]]+D[e[a+2]]+D[e[a+3]]+"-"+D[e[a+4]]+D[e[a+5]]+"-"+D[e[a+6]]+D[e[a+7]]+"-"+D[e[a+8]]+D[e[a+9]]+"-"+D[e[a+10]]+D[e[a+11]]+D[e[a+12]]+D[e[a+13]]+D[e[a+14]]+D[e[a+15]]}const bt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),he={randomUUID:bt};function $t(e,a,n){if(he.randomUUID&&!a&&!e)return he.randomUUID();e=e||{};const s=e.random||(e.rng||wt)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,a){n=n||0;for(let c=0;c<16;++c)a[n+c]=s[c];return a}return xt(s)}const kt=["disabled"],Ct={__name:"MicrophoneChat",setup(e){const a=R();let n=p(!1),s=p([]),c=p(null),l;const i=async()=>{try{let w=Date.now();const v=await navigator.mediaDevices.getUserMedia({audio:!0});l=new MediaRecorder(v),l.ondataavailable=C=>{s.value.push(C.data)},l.onstop=()=>{if((Date.now()-w)/1e3>=60){T.fire({title:"التسجيل طويل جدًا",text:"الحد الأقصى للتسجيل دقيقة واحدة",icon:"error"}),s.value=[];return}const x=new Blob(s.value,{type:"audio/mpeg"});let b=`${c.name+$t()}.mp3`;c.value=new File([x],b,{type:"audio/mpeg"}),s.value=[],l=null},l.start(),n.value=!0}catch{T.fire({title:"فشل في الوصول إلى الميكروفون",text:"الرجاء تمكين الميكروفون",icon:"question"})}},u=()=>{n.value=!1,l.stop(),setTimeout(()=>{a.sendRequestVoice(c.value)},100)};function g(){document.querySelectorAll("audio").forEach(v=>{v.pause()})}return B(qe,He),(w,v)=>(r(),S(se,null,{default:L(()=>[t(a).question.length<=0&&!t(a).file&&!t(a).isImage?(r(),h("button",{key:0,disabled:t(a).disableSend,onClick:v[0]||(v[0]=A(C=>g(),["prevent"])),class:"record-btn btn"},[t(n)?y("",!0):(r(),S(t($),{key:0,fill:"#AAAAAA",name:"md-keyboardvoice",scale:"2",onClick:i})),t(n)?(r(),S(t($),{key:1,class:"recording",scale:"2",name:"bi-stop-circle-fill",onClick:u})):y("",!0)],8,kt)):y("",!0)]),_:1}))}},It=k(Ct,[["__scopeId","data-v-5a78205b"]]),J=E("ToggleSidebar",()=>{let e=p(!1);function a(){e.value=!e.value}return{ToggleSidebar:a,showSidebar:e}}),St={key:0,class:"error-msg"},Dt={class:"textarea-container"},Bt=["rows"],Mt=["disabled"],Tt={__name:"SendMessage",setup(e){const a=ie(),n=J(),s=R();let c=Q();const l=G();let i=p(""),u=p(1);O(()=>{i.value=s.chatError});function g(){n.showSidebar=!1}function w(){s.question.trim()?(s.file?s.sendRequestWithFile():s.sendRequest(),a.showFile=!1,u.value=1):s.chatError="الرجاء إدخال النص."}function v(C){c.textNum===0||s.disableSend||C.key==="Enter"&&(C.shiftKey?u.value>=5||u.value++:(C.preventDefault(),w(),u.value=1))}return B(ye,Ee),(C,x)=>(r(),h("section",{onClick:x[4]||(x[4]=b=>g()),class:N(["form-contanier d-flex flex-row justify-content-center align-items-center",{light:!t(l)}])},[o("form",{onSubmit:A(w,["prevent"]),class:"d-flex flex-row justify-content-center align-items-center p-1"},[f(vt),t(i)?(r(),h("div",St,[o("p",null,M(t(i)),1)])):y("",!0),o("div",Dt,[f(ht,{onDeleteFile:x[0]||(x[0]=b=>console.log())}),we(o("textarea",{onInput:x[1]||(x[1]=b=>t(s).chatError=""),"onUpdate:modelValue":x[2]||(x[2]=b=>t(s).question=b),placeholder:"أدخل سؤالك",class:N([[{warning:t(i)!==""},{light:!t(l)}],"text-area"]),rows:t(u),onKeydown:x[3]||(x[3]=b=>v(b))},null,42,Bt),[[xe,t(s).question,void 0,{trim:!0}]])]),t(c).voiceNum>0?(r(),S(It,{key:1})):y("",!0),f(se,null,{default:L(()=>[t(s).question||t(s).file||t(s).isImage||t(c).voiceNum===0?(r(),h("button",{key:0,class:"btn",disabled:t(c).textNum===0&&!t(s).isImage||t(s).isImage&&t(c).imageNum===0||!t(s).question||t(s).disableSend||!t(s).question.trim()},[f(t($),{name:"md-send",class:"send-icon",scale:"2"})],8,Mt)):y("",!0)]),_:1})],32)],2))}},Nt=k(Tt,[["__scopeId","data-v-9d277199"]]),de=e=>(j("data-v-31cda009"),e=e(),F(),e),jt={class:"setting-toogle d-flex justify-content-evenly flex-column p-2"},Ft={key:0},Ut={key:1},Ht=de(()=>o("p",null,"المظهر",-1)),qt=de(()=>o("p",null,"حذف السجل",-1)),Et=de(()=>o("p",null,"تسجيل الخروج",-1)),At={__name:"UserSetting",setup(e){B(Re,Ve,Le,Ae);const a=R(),n=G(),s=te();let c=it(n),l=()=>{T.fire({title:"تأكيد تسجيل الخروج",text:"هل أنت متأكد أنك تريد تسجيل الخروج؟",icon:"warning",showCancelButton:!0,confirmButtonText:"نعم",cancelButtonText:"لا",confirmButtonColor:"#e74c3c",reverseButtons:!0}).then(u=>{u.isConfirmed&&(q.remove("jwt"),s.push("/serives"))})},i=()=>{T.fire({title:"تأكيد حذف جميع المحادثات",text:"هل أنت متأكد أنك تريد حذف جميع المحادثات؟",icon:"warning",showCancelButton:!0,confirmButtonText:"نعم، احذف الكل",cancelButtonText:"لا، إلغاء",reverseButtons:!0,confirmButtonColor:"#e74c3c"}).then(u=>{u.isConfirmed&&a.deleteAllChat()})};return(u,g)=>(r(),h("div",jt,[o("div",{class:"mode-toggle d-flex align-items-center p-2",onClick:g[0]||(g[0]=w=>t(c)())},[t(n)?(r(),h("span",Ft,[f(t($),{name:"md-lightmode-round",class:"ms-3"})])):(r(),h("span",Ut,[f(t($),{name:"ri-moon-clear-fill",class:"ms-3"})])),Ht]),o("div",{class:"delete-all-chat d-flex align-items-center p-2",onClick:g[1]||(g[1]=w=>t(i)())},[f(t($),{name:"md-delete-twotone",scale:"1",class:"ms-3"}),qt]),o("div",{class:"log-out d-flex align-items-center p-2",onClick:g[2]||(g[2]=(...w)=>t(l)&&t(l)(...w))},[f(t($),{name:"md-logout",scale:"1",class:"ms-3"}),Et])]))}},Lt=k(At,[["__scopeId","data-v-31cda009"]]),Vt={class:"user-logo d-flex justify-content-center align-items-center ms-3"},Rt={class:"user-name text-truncate",dir:"ltr"},Pt={__name:"UserName",props:{show:{type:Boolean,default:!1}},setup(e){let a=e,n=X(),s=p(""),c=p(""),l=p(""),i=p(!1);const u=p(null);n.UserName&&n.email&&(s.value=n.UserName,c.value=n.email,l.value=c.value.slice(0,2));let g=()=>{i.value=!i.value};return lt(u,()=>i.value=!1),(w,v)=>(r(),h("div",{class:"name-parent d-flex justify-content-right align-items-center",ref_key:"target",ref:u,onClick:v[1]||(v[1]=C=>t(g)())},[o("span",Vt,M(t(l)),1),o("span",Rt,M(t(s)),1),f(se,null,{default:L(()=>[t(i)&&t(a).show?(r(),S(Lt,{key:0,onClick:v[0]||(v[0]=A(()=>{},["stop"]))})):y("",!0)]),_:1})],512))}},ne=k(Pt,[["__scopeId","data-v-72d1048d"]]),zt=e=>(j("data-v-c232707c"),e=e(),F(),e),Kt=zt(()=>o("span",{class:"ms-2"}," خطط الأسعار ",-1)),Yt={__name:"UpgradePlans",setup(e){return B(Pe),(a,n)=>{const s=be("RouterLink");return r(),S(s,{to:"/prices",class:"upgrade-cont text-decoration-none text-white d-flex"},{default:L(()=>[Kt,f(t($),{name:"bi-stars",scale:"1.5"})]),_:1})}}},Ot=k(Yt,[["__scopeId","data-v-c232707c"]]),Wt=e=>(j("data-v-955b4661"),e=e(),F(),e),Gt={class:"px-2 py-3 mt-1 d-flex justify-content-center"},Xt=Wt(()=>o("span",{class:"ms-4"}," محادثة جديدة ",-1)),Qt={__name:"NewChat",setup(e){return B(ze),(a,n)=>(r(),h("section",Gt,[Xt,f(t($),{name:"bi-chat-left-dots",scale:"1.5",class:"new-message"})]))}},Jt=k(Qt,[["__scopeId","data-v-955b4661"]]),Zt={},es=e=>(j("data-v-fcf307d5"),e=e(),F(),e),ts={class:"px-2 py-3 mt-1 d-flex justify-content-center"},ss=es(()=>o("span",{class:"ms-4 my-4"},"المعرفة المجتمعية",-1));function as(e,a){const n=be("RouterLink");return r(),h("section",ts,[f(n,{to:"/"},{default:L(()=>[ss]),_:1})])}const os=k(Zt,[["render",as],["__scopeId","data-v-fcf307d5"]]),ns=e=>(j("data-v-31d97877"),e=e(),F(),e),is={class:"px-2 py-3 mt-1 d-flex justify-content-center"},ls=ns(()=>o("span",{class:"ms-4"}," سجل المحادثه",-1)),cs={__name:"ChatHistory",setup(e){return B(Ke),(a,n)=>(r(),h("section",is,[ls,f(t($),{name:"md-history",scale:"1.5",class:"history"})]))}},rs=k(cs,[["__scopeId","data-v-31d97877"]]),ds=e=>(j("data-v-e921a83d"),e=e(),F(),e),us={class:"px-2 py-3 mt-1 d-flex justify-content-center"},_s=ds(()=>o("span",{class:"ms-4"}," شاركنا المعرفة",-1)),ms={__name:"ShareFile",setup(e){return B(ct,Ye),(a,n)=>(r(),h("section",us,[_s,f(t($),{name:"bi-share",scale:"1.5",class:"history"})]))}},hs=k(ms,[["__scopeId","data-v-e921a83d"]]),ps=e=>(j("data-v-62d7f003"),e=e(),F(),e),fs={class:"limit-container d-flex flex-column justify-content-center align-items-right"},gs=ps(()=>o("span",{class:"icon"},[o("img",{src:W,alt:"logo"})],-1)),vs={class:"points-parent d-flex justify-content-between align-items-center text-center mt-2"},ys={__name:"ThePlanLimits",setup(e){let a=te();const n=X();let s=Q(),c=re(),l=p(null),i=p(null),u=p(null),g=p(null);O(()=>{l.value=s.textNum,i.value=s.voiceNum,u.value=s.imageNum}),O(()=>{g.value=n.pointsNum});const w=()=>{T.fire({title:"تحصيل النقاط",text:"يمكنك الحصول على النقاط من خلال رفع الملفات. سيتم منحك 20 نقطة عن كل ملف يتم قبوله من قبل المسؤول.",showCancelButton:!0,confirmButtonColor:"#3085d6",confirmButtonText:"نعم، تحصيل النقاط",cancelButtonText:"إلغاء",reverseButtons:!0}).then(v=>{v.isConfirmed&&a.push("/dashboard")})};return s.getUserLimits(),B(Oe),(v,C)=>(r(),h("section",fs,[gs,o("span",null," الكلمات : "+M(t(l)||0),1),o("span",null," المحادثة الصوتية : "+M(t(i)||0),1),o("span",null," الصور : "+M(t(u)||0),1),o("span",null," النقاط : "+M(t(g)||0),1),o("div",vs,[o("span",{class:"win-points col-5",onClick:w}," تحصيل نقاط "),o("span",{class:"exchange-points col-5",onClick:C[0]||(C[0]=(...x)=>t(c).toggleShowExchangeModal&&t(c).toggleShowExchangeModal(...x))}," استبدال النقاط ")])]))}},ws=k(ys,[["__scopeId","data-v-62d7f003"]]),xs=e=>(j("data-v-993d902d"),e=e(),F(),e),bs={class:"history-container"},$s={class:"mb-2"},ks=xs(()=>o("hr",null,null,-1)),Cs={class:"plan-info position-absolute"},Is={class:"position-fixed bottom-0 mb-4 mt-2"},Ss={__name:"SideBar",setup(e){const a=J(),n=le(),s=ce();return B(dt),(c,l)=>(r(),h("section",bs,[t(a).showSidebar?(r(),h("span",{key:0,class:"cancel-btn",onClick:l[0]||(l[0]=i=>t(a).ToggleSidebar())},[f(t($),{name:"io-close",class:"cancel-icon"})])):y("",!0),o("div",$s,[f(os)]),ks,o("div",{class:"new-chat-cont mb-2",onClick:l[1]||(l[1]=(...i)=>t(s).showChat&&t(s).showChat(...i))},[f(Jt)]),o("div",{class:"old-chat-cont mb-2",onClick:l[3]||(l[3]=(...i)=>t(s).showHistory&&t(s).showHistory(...i))},[f(rs,{onClick:l[2]||(l[2]=i=>t(n).getHistory())})]),o("div",{class:"share-knowlage-cont mb-2",onClick:l[4]||(l[4]=i=>t(We).push("/dashboard"))},[f(hs)]),o("div",Cs,[f(ws)]),f(Ot),o("div",Is,[f(ne,{show:""})])]))}},Ds=k(Ss,[["__scopeId","data-v-993d902d"]]),Bs={class:"header"},Ms={__name:"ModalHeader",setup(e){const a=J();return B(rt),(n,s)=>(r(),h("header",Bs,[f(t($),{name:"co-hamburger-menu",scale:"2",onClick:s[0]||(s[0]=c=>t(a).ToggleSidebar())})]))}},Ts=k(Ms,[["__scopeId","data-v-6030a1b9"]]),Ce=E("ModalToggleEdit",()=>{let e=p(""),a=p(!1);function n(l){e.value=l}function s(){a.value=!0}function c(){a.value=!1}return{getId:n,showHeaderModal:s,hideHeaderModal:c,show:e,showEditHeader:a}}),Ns=e=>(j("data-v-2207d546"),e=e(),F(),e),js={class:"modal-content container d-flex justify-content-center align-items-center flex-column"},Fs=Ns(()=>o("div",{class:"modal-header"},[o("h2",null,"إعادة تسمية هذه المحادثة")],-1)),Us={class:"modal-body d-flex justify-content-center align-items-center"},Hs={class:"modal-footer d-flex justify-content-between"},qs={__name:"ModalEditHeader",props:["chatHeader"],setup(e){const a=Ce(),n=R(),s=()=>{n.updateHeader(),a.hideHeaderModal()};return(c,l)=>(r(),h("div",{class:"modal-parent d-flex justify-content-center align-items-center",onClick:l[3]||(l[3]=A((...i)=>t(a).hideHeaderModal&&t(a).hideHeaderModal(...i),["self"]))},[o("div",null,[o("div",js,[Fs,o("div",Us,[o("form",{onSubmit:A(s,["prevent"]),class:"d-flex justify-content-center align-items-center"},[we(o("input",{type:"text",class:"px-1 py-2","onUpdate:modelValue":l[0]||(l[0]=i=>t(n).newHeader=i)},null,512),[[xe,t(n).newHeader]])],32)]),o("div",Hs,[o("button",{type:"button",class:"btn btn-secondary",onClick:l[1]||(l[1]=(...i)=>t(a).hideHeaderModal&&t(a).hideHeaderModal(...i))}," إلغاء "),o("button",{type:"button",class:"btn btn-primary",onClick:l[2]||(l[2]=i=>s())}," حفظ ")])])])]))}},Es=k(qs,[["__scopeId","data-v-2207d546"]]),As={__name:"LoadingSkeleton",props:["height"],setup(e){let a=e;return(n,s)=>(r(),h("div",{class:"skeleton-paragraph",style:Ge({height:t(a).height})},null,4))}},pe=k(As,[["__scopeId","data-v-ae4714b4"]]),Ls={},Vs=e=>(j("data-v-098b9337"),e=e(),F(),e),Rs={class:"loader-flash"},Ps=Vs(()=>o("img",{src:W,alt:"loading"},null,-1)),zs=[Ps];function Ks(e,a){return r(),h("div",Rs,zs)}const fe=k(Ls,[["render",Ks],["__scopeId","data-v-098b9337"]]),Ys={class:"delete-parent"},Os={__name:"DeleteMessage",setup(e){const a=G();return B(Xe),(n,s)=>(r(),h("span",Ys,[f(t($),{name:"md-deleteoutline-twotone",scale:"1.25",class:N(["delete",{light:!t(a)}])},null,8,["class"])]))}},ge=k(Os,[["__scopeId","data-v-d222138c"]]),Z=e=>(j("data-v-a2cd4a62"),e=e(),F(),e),Ws={key:0,class:"no_response"},Gs={class:"user-question"},Xs={key:1,class:"file-icon-container d-flex flex-row-reverse justify-content-end mb-4"},Qs={key:3,class:"audio-container mb-5"},Js={controls:""},Zs=["src"],ea={class:"chat-answer"},ta={class:"chat-logo"},sa=Z(()=>o("img",{src:W,alt:"chat-logo"},null,-1)),aa={key:0,class:"image-container d-flex justify-content-center align-items-center"},oa=["href"],na=["src"],ia={key:3,class:"audio-container"},la={controls:""},ca=["src"],ra={key:1,class:"no_history"},da=Z(()=>o("div",null,[o("img",{src:W,alt:"logo"})],-1)),ua=Z(()=>o("h1",null,"لا يوجد سجل سابق",-1)),_a=[da,ua],ma={class:"user-question"},ha={key:0,class:"file-icon-container d-flex flex-row-reverse justify-content-end"},pa={key:1,class:"audio-container mb-5"},fa={controls:""},ga=["src"],va={class:"chat-answer"},ya={class:"chat-logo"},wa=Z(()=>o("img",{src:W,alt:"chat-logo"},null,-1)),xa={key:0},ba=["href"],$a=["src"],ka={key:2},Ca={key:0},Ia={class:"audio-container"},Sa={controls:""},Da=["src"],Ba=Z(()=>o("span",{class:"last"},null,-1)),Ma={__name:"ChatBody",setup(e){const a=J(),n=Ce(),s=R(),c=le(),l=ce(),i=Q(),u=ke();te();let g=p([]),w=p([]);p(!1);const v=G();oe(()=>l.count,(b,U)=>{b>U&&(g.value=[],s.userCurrentData=[],g.value=s.userCurrentData)},{immediate:!0}),oe(()=>s.userCurrentData,(b,U)=>{b.value<=0?g.value=[]:g.value=s.userCurrentData},{immediate:!0}),oe(()=>c.history,(b,U)=>{w.value=c.history},{immediate:!0});function C(){const b=document.querySelector(".last");b&&b.scrollIntoView()}let x=b=>{s.deleteChat(b)};return Qe(()=>{C(),i.getUserLimits()}),Je(()=>{C(),i.getUserLimits()}),Ze(()=>{u.getSubscribe()}),B(et,ve),(b,U)=>(r(),h("section",{class:N(["parent",{light:!t(v)}])},[f(Ts),t(g).length<=0&&t(l).newChat?(r(),h("div",Ws)):y("",!0),f(me,{name:"fade"},{default:L(()=>[t(l).showChat?(r(!0),h(ue,{key:0},_e(t(g),d=>(r(),h("section",{class:"py-1",onClick:U[0]||(U[0]=z=>t(a).showSidebar=!1)},[o("article",Gs,[f(ne),d.user_file?y("",!0):(r(),h("p",{key:0,class:N(["user-question-text",{"text-light":!t(v)}])},M(d.question),3)),d.IsFile?(r(),h("div",Xs,[o("p",null,M(d.fileName),1),f(t($),{name:"bi-file-earmark-text",scale:"2",fill:"#3A811D"})])):y("",!0),!d.question&&!d.image?(r(),S(pe,{key:2,height:"30px"})):y("",!0),d.user_file?(r(),h("div",Qs,[o("audio",Js,[o("source",{src:d.user_file,type:"audio/mpeg"},null,8,Zs),Y(" Your browser does not support the audio element. ")])])):y("",!0)]),o("article",ea,[o("div",ta,[sa,o("span",{class:N(["chat-name",{"text-light":!t(v)}])},"المعرفة المجتمعية",2),d.id?(r(),S(ge,{key:0,onClick:z=>t(x)(d.id)},null,8,["onClick"])):y("",!0)]),d.image?(r(),h("div",aa,[o("a",{href:d.image,target:"_blank"},[o("img",{src:d.image,alt:"response image"},null,8,na)],8,oa)])):y("",!0),typeof d.text=="string"&&!d.user_file?(r(),h("p",{key:1,class:N(["text",{"text-light":!t(v)}])},M(d.text),3)):y("",!0),!d.text&&!d.image?(r(),S(fe,{key:2})):y("",!0),d.BotVoice?(r(),h("div",ia,[o("audio",la,[o("source",{src:d.BotVoice,type:"audio/mpeg"},null,8,ca),Y(" Your browser does not support the audio element. ")])])):y("",!0)])]))),256)):y("",!0)]),_:1}),t(w).length<=0&&t(l).history?(r(),h("div",ra,_a)):y("",!0),f(me,{name:"fade"},{default:L(()=>[t(l).history?(r(!0),h(ue,{key:0},_e(t(w),d=>(r(),h("section",{class:"py-1",onClick:U[1]||(U[1]=z=>t(a).showSidebar=!1),key:d.id},[o("article",ma,[f(ne),d.message_content&&!d.sent_file&&!d.IsVoice?(r(),h("p",{key:0,class:N(["user-question-text",{"text-light":!t(v)}])},[Y(M(d.message_content)+" ",1),d.IsFile?(r(),h("div",ha,[o("p",null,M(d.fileName),1),f(t($),{name:"bi-file-earmark-text",scale:"2",fill:"#3A811D"})])):y("",!0)],2)):y("",!0),d.sent_file&&d.IsVoice||d.user_file?(r(),h("div",pa,[o("audio",fa,[o("source",{src:d.sent_file||d.user_file,type:"audio/mpeg"},null,8,ga),Y(" Your browser does not support the audio element. ")])])):y("",!0),!d.id&&!d.message_content?(r(),S(pe,{key:2,height:"30px"})):y("",!0)]),o("article",va,[o("div",ya,[wa,o("span",{class:N(["chat-name",{"text-light":!t(v)}])},"المعرفة المجتمعية",2),d.id?(r(),S(ge,{key:0,onClick:z=>t(x)(d.id)},null,8,["onClick"])):y("",!0)]),d.bot_file?(r(),h("div",xa,[d.bot_file.includes(".jpg")||d.bot_file.includes(".png")||d.bot_file.includes(".gif")||d.bot_file.includes(".jpeg")||d.bot_file.includes(".svg")||d.bot_file.includes("oaidalleapiprodscus")?(r(),h("div",{key:0,class:N(["image-container",{"text-light":!t(v)}])},[o("a",{href:d.bot_file,target:"_blank"},[o("img",{src:d.bot_file,alt:"image",loading:"lazy"},null,8,$a)],8,ba)],2)):y("",!0)])):y("",!0),d.bot_answer!==""&&d.bot_answer!=="voice message"&&!d.bot_file&&!d.bot_answer!=="voice message"?(r(),h("p",{key:1,class:N(["text",{"text-light":!t(v)}])},M(d.bot_answer),3)):y("",!0),d.bot_answer!=="voice message"&&d.user_audio!==null?(r(),h("div",ka,[d.bot_file&&d.bot_answer!=="voice message"?(r(),h("div",Ca,[o("div",Ia,[o("audio",Sa,[o("source",{src:d.bot_file,type:"audio/mpeg"},null,8,Da),Y(" Your browser does not support the audio element. ")])])])):y("",!0)])):y("",!0),d.id?y("",!0):(r(),S(fe,{key:3}))])]))),128)):y("",!0)]),_:1}),(r(),S($e,{to:"#app"},[t(n).showEditHeader?(r(),S(Es,{key:0})):y("",!0)])),Ba],2))}},Ta=k(Ma,[["__scopeId","data-v-a2cd4a62"]]),Na=X(),ja=E("exchangePoints",()=>{const e=Q();let a=p(!1);function n(s){let c=q.get("jwt");H.post("https://impactstudio.pythonanywhere.com/api/user/change_points/",{reward_type:s},{withCredentials:!0,headers:{Authorization:`Bearer ${c}`}}).then(l=>{T.fire({icon:"success",title:"تم..."})}).catch(l=>{T.fire({icon:"error",title:"خطأ...",text:"حدث خطأ، يرجى المحاولة لاحقًا!"})}).finally(()=>{e.getUserLimits(),Na.getUserData()})}return{exchangePoints:n,loading:a}}),P=e=>(j("data-v-0f5f5c2f"),e=e(),F(),e),Fa={class:"modal-container col-8 col-md-3"},Ua={class:"icon mb-2"},Ha=P(()=>o("h4",null,"استبدل نقاطك بالنصوص",-1)),qa=P(()=>o("p",null,"100 نقطة مقابل 1000 كلمة",-1)),Ea=["disabled"],Aa={class:"modal-container col-8 col-md-3"},La={class:"icon mb-2"},Va=P(()=>o("h4",null,"استبدل نقاطك بمحادثة صوتية",-1)),Ra=P(()=>o("p",null,"150 نقطة مقابل 20 تسجيل صوتي",-1)),Pa=["disabled"],za={class:"modal-container col-8 col-md-3"},Ka={class:"icon mb-2"},Ya=P(()=>o("h4",null,"استبدل نقاطك بالصور",-1)),Oa=P(()=>o("p",null,"200 نقطة مقابل 10 صور",-1)),Wa=["disabled"],Ga={__name:"PointExchangeModal",setup(e){const a=re(),n=ja(),s=X();return B(at,st,tt),(c,l)=>(r(),S($e,{to:"#points"},[t(a).showExchangeModel?(r(),h("section",{key:0,onClick:l[3]||(l[3]=A((...i)=>t(a).toggleShowExchangeModal&&t(a).toggleShowExchangeModal(...i),["self"])),class:"modal-container-parent d-flex justify-content-evenly align-items-center flex-wrap"},[o("div",Fa,[o("div",Ua,[f(t($),{name:"bi-chat-left-text",fill:"#49A67B",scale:"3"})]),Ha,qa,o("button",{class:"btn btn-primary",onClick:l[0]||(l[0]=A(i=>t(n).exchangePoints("words"),["prevent"])),disabled:t(s).pointsNum<100}," استبدال ",8,Ea)]),o("div",Aa,[o("div",La,[f(t($),{name:"bi-megaphone",fill:"#49A67B",scale:"3"})]),Va,Ra,o("button",{class:"btn btn-primary",onClick:l[1]||(l[1]=A(i=>t(n).exchangePoints("audio"),["prevent"])),disabled:t(s).pointsNum<150}," استبدال ",8,Pa)]),o("div",za,[o("div",Ka,[f(t($),{name:"md-imagesearchroller-outlined",fill:"#49A67B",scale:"3"})]),Ya,Oa,o("button",{class:"btn btn-primary",onClick:l[2]||(l[2]=A(i=>t(n).exchangePoints("image"),["prevent"])),disabled:t(s).pointsNum<200||t(n).loading}," استبدال ",8,Wa)])])):y("",!0)]))}},Xa=k(Ga,[["__scopeId","data-v-0f5f5c2f"]]),Qa={class:"model-container"},Ja={key:0,class:"aside-container container d-block"},Za={class:"body-container d-flex flex-column"},eo={__name:"ModelView",setup(e){const a=J();return(n,s)=>(r(),h("section",Qa,[f(se,{name:"insert"},{default:L(()=>[t(a).showSidebar?(r(),h("aside",Ja,[f(Ds)])):y("",!0)]),_:1}),o("section",Za,[(r(),S(ot,null,[f(Ta)],1024)),f(Xa),f(Nt,{class:"col-12 align-self-end"})])]))}},co=k(eo,[["__scopeId","data-v-0b98927b"]]);export{co as default};
