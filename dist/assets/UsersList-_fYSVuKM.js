import{x as N,r as b,V as y,S as V,_ as A,A as j,a as d,c as p,f as e,E as $,u as a,K as z,L as F,ae as L,o as T,n as D,q as E,b as U,F as I,l as R,e as w,D as q,w as x,aJ as K,aK as M,t as _,v as B,d as P,p as J,g as G}from"./index-u-RSwE93.js";import{a as C}from"./axios-L6U4YIEh.js";import{P as H}from"./PaginationButtons-VeAyxRz6.js";import{u as O}from"./AdminUsersEdit-mn2AlARA.js";const Q="/images/undraw_void_-3-ggu.svg",S=N("adminUserList",()=>{let n=b([]),t=b(!1),s=b(!1),c=b(""),h=b(0),m=b(null),l=()=>{V.fire({icon:"error",title:"عذراً...",text:"حدث خطأ ما!",confirmButtonColor:"#ff0000"})},u=(r=1)=>{s.value=!1,n.value=[],t.value=!0;let g=y.get("jwt");C.get(`https://impactstudio.pythonanywhere.com/api/user/list/all/?page=${r}&page_size=25`,{withCredentials:!0,headers:{Authorization:`Bearer ${g}`}}).then(f=>{h.value=f.data.count,n.value=f.data.results,n.value.length<=0&&(s.value=!0)}).catch(f=>{l(),s.value=!0}).finally(()=>{t.value=!1})},o=(r,g=1)=>{s.value=!1,n.value=[],t.value=!0;let f=y.get("jwt");C.get(`https://impactstudio.pythonanywhere.com/api/user/list/${r}?page=${g}&page_size=25`,{withCredentials:!0,headers:{Authorization:`Bearer ${f}`}}).then(v=>{h.value=v.data.count,n.value=v.data.results,n.value.length<=0&&(s.value=!0)}).catch(v=>{l(),s.value=!0}).finally(()=>{t.value=!1})},i=(r,g=1)=>{s.value=!1,n.value=[],t.value=!0;let f=y.get("jwt");C.get(`https://impactstudio.pythonanywhere.com/api/user/Search/?type=users&search_val=${r}&page=${g}&page_size=25`,{withCredentials:!0,headers:{Authorization:`Bearer ${f}`}}).then(v=>{h.value=v.data.count,n.value=v.data.results,n.value.length<=0&&(s.value=!0)}).catch(v=>{l(),s.value=!0}).finally(()=>{t.value=!1})};return{getUsersList:u,searchUsers:i,filterUsers:o,paginateUsers:r=>{c.value===""?u(r):c.value==="admins"?o("admins",r):c.value==="users"?o("users",r):c.value==="search"&&i(m.value,r)},usersList:n,usersCount:h,userName:m,loading:t,noUsers:s,filter:c}}),W={class:"filter-users position-relative"},X={class:"btn-cont"},Y=["disabled"],Z=["disabled"],ee={__name:"FilterUsersList",setup(n){const t=S();let s=b(""),c=u=>{t.filter="search",t.searchUsers(u)},h=()=>{t.filter="admins",t.filterUsers("admins",1)},m=()=>{t.filter="",t.filterUsers("all",1)},l=()=>{t.filter="users",t.filterUsers("users",1)};return j(()=>{t.userName=s.value}),(u,o)=>(d(),p("article",W,[e("div",X,[e("button",{class:$(["btn btn-light m-1",{"btn-dark":a(t).filter===""}]),onClick:o[0]||(o[0]=i=>a(m)())}," الكل ",2),e("button",{class:$(["btn btn-light m-1",{"btn-dark":a(t).filter==="admins"}]),onClick:o[1]||(o[1]=i=>a(h)())}," المشرفون ",2),e("button",{class:$(["btn btn-light m-1",{"btn-dark":a(t).filter==="users"}]),onClick:o[2]||(o[2]=i=>a(l)())}," المستخدمون ",2),z(e("input",{required:"","onUpdate:modelValue":o[3]||(o[3]=i=>L(s)?s.value=i:s=i),placeholder:" أدخل كلمة البحث",type:"text",class:"btn m-1 search_bar"},null,512),[[F,a(s)]]),e("button",{class:"btn btn-danger ms-1",type:"reset",onClick:o[4]||(o[4]=i=>(L(s)?s.value="":s="",a(m)())),disabled:!a(s)}," إلغاء ",8,Y),e("button",{class:"btn btn-primary",type:"submit",onClick:o[5]||(o[5]=i=>a(c)(a(s))),disabled:!a(s)}," بحث ",8,Z)])]))}},te=A(ee,[["__scopeId","data-v-0f46e9f1"]]),k=n=>(J("data-v-ffe2c9fd"),n=n(),G(),n),se={class:"user-list-parent"},ae={key:0,class:"table-container"},le={class:"table table-hover"},oe=k(()=>e("thead",null,[e("tr",null,[e("th",{scope:"col"},"#"),e("th",{scope:"col"},"اسم المستخدم"),e("th",{scope:"col"},"البريد الالكتروني"),e("th",{class:"d-none d-md-table-cell",scope:"col"},"عدد الكلمات"),e("th",{class:"d-none d-md-table-cell",scope:"col"},"عدد الصوتيات"),e("th",{class:"d-none d-md-table-cell",scope:"col"},"عدد الصور"),e("th",{class:"d-none d-md-table-cell",scope:"col"},"النقاط المتاحة"),e("th",{class:"d-none d-md-table-cell",scope:"col"},"الرقم التعريفي")])],-1)),ne={scope:"row"},ie={key:0},re={class:"user-email text-trunc"},de={class:"d-none d-md-table-cell"},ce={class:"d-none d-md-table-cell"},ue={class:"d-none d-md-table-cell"},_e={class:"d-none d-md-table-cell"},pe={class:"d-none d-md-table-cell"},he={class:"edit_icon p-1 rounded-5 dropdown-toggle","data-bs-toggle":"dropdown","data-bs-display":"static","aria-expanded":"false"},me={class:"btn-group"},fe={class:"dropdown-menu dropdown-menu-lg-start"},ve=["onClick"],be={class:"pagination-buttons"},ge=["onClick"],we={key:1,class:"no-user-parent"},Ue=k(()=>e("img",{src:Q,alt:"no-users-logo"},null,-1)),ke=k(()=>e("h1",null,"لا يوجد مستخدمين",-1)),ye=[Ue,ke],$e={key:2,class:"d-flex justify-content-center mt-5"},Ce=k(()=>e("div",{class:"loader"},null,-1)),Le=[Ce],xe={__name:"UsersList",setup(n){const t=S(),s=O();return T(()=>{t.getUsersList(1)}),D(M,K),(c,h)=>{const m=E("RouterLink");return d(),p("section",se,[U(te),a(t).usersList.length>0?(d(),p("article",ae,[e("table",le,[oe,e("tbody",null,[(d(!0),p(I,null,R(a(t).usersList,(l,u)=>(d(),p("tr",{key:l.id},[e("th",ne,_(u+1),1),e("td",null,[l.is_staff?(d(),p("span",ie,[U(a(B),{name:"fa-crown",fill:"green"})])):w("",!0),P(" "+_(l.name),1)]),e("td",re,_(l.email),1),e("td",de,_(l.words_limit),1),e("td",ce,_(l.audio_limit),1),e("td",ue,_(l.image_media_limit),1),e("td",_e,_(l.points),1),e("td",pe,_(l.id),1),e("td",null,[e("span",he,[U(a(B),{name:"bi-three-dots-vertical"})]),e("div",me,[e("ul",fe,[e("li",null,[U(m,{class:"reboot-text",to:"edit-user"},{default:x(()=>[e("span",{class:"dropdown-item",onClick:o=>a(s).userData=l},"تعديل ",8,ve)]),_:2},1024)])])])])]))),128))])])])):w("",!0),e("div",be,[!a(t).loading&&!a(t).noUsers?(d(),q(H,{key:0,number:a(t).usersCount},{button:x(({number:l})=>[e("span",{class:"pagination-slot",onClick:u=>a(t).paginateUsers(l)},null,8,ge)]),_:1},8,["number"])):w("",!0)]),a(t).noUsers?(d(),p("article",we,ye)):w("",!0),a(t).loading?(d(),p("section",$e,Le)):w("",!0)])}}},je=A(xe,[["__scopeId","data-v-ffe2c9fd"]]);export{je as default};
