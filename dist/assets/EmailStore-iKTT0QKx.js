import{x as c,z as l,r as n,S as r}from"./index-u-RSwE93.js";import{a as i}from"./axios-L6U4YIEh.js";const x=c("emailStore",()=>{const o=l();let s=()=>{r.fire({icon:"error",title:"عذراً...",text:" حدث خطأ!",confirmButtonColor:"#ff0000"})};return{sendOtp:e=>{sessionStorage.setItem("email",e),i.post("https://impactstudio.pythonanywhere.com/api/user/send_otp/",{email:e}).then(t=>{o.push("/verify-email")}).catch(t=>{s()})},verfiyOtp:e=>{let t=n(sessionStorage.getItem("email"));t.value?i.post("https://impactstudio.pythonanywhere.com/api/user/verify_otp/",{email:t.value,otp:e}).then(a=>{o.push("/login"),r.fire({icon:"success",title:"تم التحقق من بريدك الإلكتروني بنجاح!",text:"يرجى تسجيل الدخول للاستمرار في استخدام الخدمة.",timer:2e3})}).catch(a=>{s()}):r.fire({icon:"error",title:"عذراً...",text:"يرجى تسجيل الدخول للتحقق من البريد الإلكتروني الخاص بك",confirmButtonColor:"#ff0000",confirmButtonText:"تسجيل الدخول",cancelButtonText:"الغاء"}).then(()=>o.push("/verify-email")).catch("")},sendOtpAgain:()=>{let e=n(sessionStorage.getItem("email"));e.value?i.post("https://impactstudio.pythonanywhere.com/api/user/send_otp/",{email:e.value}).then(t=>{r.fire({icon:"success",text:" تم إرسال الرمز بنجاح",timer:1e3})}).catch(t=>{r.fire({icon:"error",title:"عذراً...",text:" حدث خطأ يرجي المحاولة لاحقا!",confirmButtonColor:"#ff0000"})}):r.fire({icon:"error",title:"عذراً...",text:"يرجى تسجيل الدخول للتحقق من البريد الإلكتروني الخاص بك",confirmButtonColor:"#ff0000",confirmButtonText:"تسجيل الدخول",cancelButtonText:"الغاء"}).then(()=>o.push("/login")).catch("")}}});export{x as u};
